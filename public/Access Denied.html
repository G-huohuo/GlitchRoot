<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>å®‰å…¨æ£€æŸ¥ | çŸ¥è¯†æ‹¾å…‰ç«™</title>
  <style>
    :root {
      --bg-0: #070b18;
      --bg-1: #0b1229;
      --card: rgba(17, 25, 40, 0.62);
      --card-strong: rgba(17, 25, 40, 0.78);
      --line: rgba(255,255,255,0.10);

      --primary: #22d3ee;   /* éœ“è™¹é’ */
      --primary-2: #a78bfa; /* éœ“è™¹ç´« */
      --danger: #fb7185;    /* æ›´æŸ”çš„è­¦ç¤ºçº¢ */
      --warn: #fbbf24;

      --text: #eaf2ff;
      --muted: rgba(234,242,255,0.60);

      --shadow: 0 28px 70px rgba(0,0,0,0.55);
      --shadow-danger: 0 28px 70px rgba(251, 113, 133, 0.15);

      --radius: 18px;

      --font-sans: ui-sans-serif, system-ui, -apple-system, "PingFang SC", "Microsoft YaHei", "Segoe UI", Roboto, Arial, sans-serif;
      --font-mono: ui-monospace, "SF Mono", Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    }

    * { box-sizing: border-box; }

    html, body {
      height: 100%;
      margin: 0;
      font-family: var(--font-sans);
      color: var(--text);
      background: radial-gradient(1200px 600px at 15% 30%, rgba(34,211,238,0.12), transparent 60%),
                  radial-gradient(900px 500px at 85% 25%, rgba(167,139,250,0.10), transparent 55%),
                  linear-gradient(180deg, var(--bg-0), var(--bg-1));
      overflow-x: hidden;
      overflow-y: auto;
    }

    /* èƒŒæ™¯ï¼šç½‘æ ¼ + å…‰æ™• + å™ªç‚¹ */
    .bg {
      position: fixed;
      inset: 0;
      z-index: -3;
      pointer-events: none;
    }

    .bg::before {
      content: "";
      position: absolute;
      inset: -20%;
      background:
        repeating-linear-gradient(0deg, rgba(255,255,255,0.05) 0, rgba(255,255,255,0.05) 1px, transparent 1px, transparent 32px),
        repeating-linear-gradient(90deg, rgba(255,255,255,0.04) 0, rgba(255,255,255,0.04) 1px, transparent 1px, transparent 32px);
      transform: translate3d(0,0,0);
      mask-image: radial-gradient(closest-side, rgba(0,0,0,0.8), transparent);
      opacity: 0.35;
      animation: gridFloat 14s ease-in-out infinite alternate;
    }

    .bg::after {
      content: "";
      position: absolute;
      inset: 0;
      background-image:
        radial-gradient(circle at 20% 50%, rgba(34,211,238,0.10), transparent 50%),
        radial-gradient(circle at 80% 35%, rgba(167,139,250,0.10), transparent 55%);
      filter: blur(0px);
      animation: aura 10s ease-in-out infinite alternate;
      opacity: 0.9;
    }

    .noise {
      position: fixed;
      inset: 0;
      z-index: -2;
      pointer-events: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='160' height='160'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='160' height='160' filter='url(%23n)' opacity='.25'/%3E%3C/svg%3E");
      opacity: 0.20;
      mix-blend-mode: overlay;
    }

    @keyframes gridFloat {
      from { transform: translate(-2%, -2%) scale(1); }
      to   { transform: translate(2%, 2%) scale(1.03); }
    }
    @keyframes aura {
      from { transform: scale(1); opacity: 0.85; }
      to   { transform: scale(1.05); opacity: 0.95; }
    }

    /* é¡¶éƒ¨å“ç‰Œ */
    .brand-header {
      position: sticky;
      top: 0;
      padding: 26px 16px 10px;
      text-align: center;
      z-index: 5;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      background: linear-gradient(180deg, rgba(7,11,24,0.65), rgba(7,11,24,0));
    }

    .brand-logo {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      font-weight: 800;
      letter-spacing: 2px;
      text-transform: uppercase;
      font-size: 18px;
      padding: 10px 14px;
      border-radius: 999px;
      color: var(--text);
      background: rgba(255,255,255,0.04);
      border: 1px solid rgba(255,255,255,0.08);
      box-shadow: 0 10px 30px rgba(0,0,0,0.25);
    }

    .brand-dot {
      width: 10px;
      height: 10px;
      border-radius: 999px;
      background: linear-gradient(135deg, var(--primary), var(--primary-2));
      box-shadow: 0 0 18px rgba(34,211,238,0.55);
    }

    /* å¸ƒå±€ */
    .wrap {
      min-height: calc(100vh - 84px);
      display: grid;
      place-items: center;
      padding: 18px 16px 28px;
    }

    .container {
      width: 100%;
      max-width: 560px;
      perspective: 1100px;
    }

    /* å¡ç‰‡ï¼šæ¸å˜æè¾¹ + ç»ç’ƒæ‹Ÿæ€ */
    .glass-card {
      position: relative;
      border-radius: var(--radius);
      padding: 34px 34px 26px;
      box-shadow: var(--shadow);
      transform-style: preserve-3d;
      transition: transform 240ms ease, box-shadow 300ms ease;

      /* æ¸å˜è¾¹æ¡†æŠ€å·§ï¼šåŒèƒŒæ™¯ */
      background:
        linear-gradient(var(--card), var(--card)) padding-box,
        linear-gradient(135deg, rgba(34,211,238,0.55), rgba(167,139,250,0.35), rgba(255,255,255,0.10)) border-box;
      border: 1px solid transparent;

      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
      overflow: hidden;
    }

    .glass-card::before {
      content: "";
      position: absolute;
      inset: -60% -30%;
      background: conic-gradient(from 180deg, rgba(34,211,238,0.18), rgba(167,139,250,0.12), rgba(34,211,238,0.18));
      filter: blur(28px);
      opacity: 0.6;
      animation: bloom 8s ease-in-out infinite alternate;
      pointer-events: none;
    }

    .glass-card::after {
      /* æ‰«å…‰ */
      content: "";
      position: absolute;
      top: -30%;
      left: -60%;
      width: 60%;
      height: 160%;
      transform: skewX(-18deg);
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.08), transparent);
      animation: shine 3.2s infinite;
      pointer-events: none;
    }

    @keyframes shine { 100% { left: 160%; } }
    @keyframes bloom { from { transform: rotate(0deg) scale(1); } to { transform: rotate(18deg) scale(1.06); } }

    /* ä¸Šéƒ¨å›¾æ ‡åŒº */
    .status-icon-wrapper {
      width: 92px;
      height: 92px;
      margin: 0 auto 18px;
      position: relative;
      display: grid;
      place-items: center;
      transform: translateZ(22px);
    }

    .radar {
      position: absolute;
      inset: 0;
      border-radius: 999px;
      background:
        radial-gradient(circle at 50% 50%, rgba(34,211,238,0.14), transparent 55%),
        conic-gradient(from 90deg, rgba(34,211,238,0.00), rgba(34,211,238,0.35), rgba(34,211,238,0.00));
      mask-image: radial-gradient(circle at 50% 50%, rgba(0,0,0,1) 62%, transparent 66%);
      animation: spin 1.8s linear infinite;
      filter: drop-shadow(0 0 12px rgba(34,211,238,0.35));
    }

    .ring {
      position: absolute;
      inset: 8px;
      border-radius: 999px;
      border: 1px solid rgba(34,211,238,0.28);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,0.04);
    }

    .badge {
      width: 54px;
      height: 54px;
      border-radius: 16px;
      display: grid;
      place-items: center;
      background: rgba(255,255,255,0.04);
      border: 1px solid rgba(255,255,255,0.08);
      box-shadow: 0 14px 30px rgba(0,0,0,0.35);
      font-size: 26px;
      transition: transform 380ms cubic-bezier(0.34, 1.56, 0.64, 1), opacity 240ms ease;
      opacity: 0.0;
      transform: scale(0.8);
    }

    .badge.on {
      opacity: 1;
      transform: scale(1);
    }

    .card-title {
      text-align: center;
      font-weight: 700;
      letter-spacing: 0.4px;
      margin: 6px 0 18px;
      font-size: 18px;
      color: rgba(234,242,255,0.95);
      transform: translateZ(18px);
    }

    .subtitle {
      text-align: center;
      margin-top: -8px;
      margin-bottom: 18px;
      color: var(--muted);
      font-size: 13px;
      transform: translateZ(16px);
    }

    /* ç»ˆç«¯çª—å£ï¼šåŠ é¡¶æ  */
    .terminal {
      position: relative;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.07);
      background: rgba(0,0,0,0.38);
      overflow: hidden;
      box-shadow: inset 0 2px 18px rgba(0,0,0,0.35);
      transform: translateZ(14px);
    }

    .terminal-topbar {
      height: 34px;
      display: flex;
      align-items: center;
      padding: 0 12px;
      gap: 8px;
      background: rgba(255,255,255,0.04);
      border-bottom: 1px solid rgba(255,255,255,0.06);
    }

    .dot { width: 9px; height: 9px; border-radius: 50%; opacity: 0.9; }
    .dot.r { background: rgba(251,113,133,0.9); }
    .dot.y { background: rgba(251,191,36,0.9); }
    .dot.g { background: rgba(34,197,94,0.9); }
    .terminal-title {
      margin-left: 8px;
      font-size: 12px;
      color: rgba(234,242,255,0.65);
      font-family: var(--font-mono);
      letter-spacing: 0.2px;
    }

    .terminal-body {
      height: 150px;
      padding: 14px 14px 12px;
      font-family: var(--font-mono);
      font-size: 13px;
      line-height: 1.5;
      color: rgba(34,211,238,0.95);
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      gap: 4px;
    }

    .log-entry {
      opacity: 0;
      transform: translateY(8px);
      animation: slideIn 220ms forwards;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .timestamp { color: rgba(234,242,255,0.55); margin-right: 10px; }
    .tag {
      display: inline-block;
      padding: 2px 8px;
      border-radius: 999px;
      margin-right: 8px;
      font-size: 11px;
      border: 1px solid rgba(255,255,255,0.08);
      background: rgba(255,255,255,0.04);
      color: rgba(234,242,255,0.72);
    }

    @keyframes slideIn {
      to { opacity: 1; transform: translateY(0); }
    }

    /* è¿›åº¦æ¡ + æ•°å­— */
    .progress-wrap {
      margin-top: 14px;
      transform: translateZ(12px);
    }

    .progress-head {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: 10px;
      color: rgba(234,242,255,0.70);
      font-size: 12px;
    }

    .progress-container {
      height: 6px;
      background: rgba(255,255,255,0.10);
      border-radius: 999px;
      overflow: hidden;
      position: relative;
    }

    .progress-bar {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, rgba(34,211,238,0.95), rgba(167,139,250,0.75));
      box-shadow: 0 0 18px rgba(34,211,238,0.45);
      transition: width 0.25s ease;
      border-radius: 999px;
    }

    /* æ‹¦æˆªä¿¡æ¯ */
    .denied-info {
      display: none;
      margin-top: 18px;
      text-align: center;
      animation: fadeIn 0.45s ease both;
      transform: translateZ(10px);
    }

    .kv {
      margin-top: 10px;
      border-radius: 14px;
      overflow: hidden;
      border: 1px solid rgba(255,255,255,0.08);
      background: rgba(255,255,255,0.03);
    }

    .data-row {
      display: flex;
      justify-content: space-between;
      gap: 12px;
      padding: 12px 14px;
      border-bottom: 1px dashed rgba(255,255,255,0.10);
      font-size: 14px;
    }
    .data-row:last-child { border-bottom: 0; }

    .data-label { color: rgba(234,242,255,0.55); }
    .data-value { font-family: var(--font-mono); letter-spacing: 0.8px; }

    .reason {
      margin: 14px 0 0;
      color: rgba(234,242,255,0.65);
      font-size: 13px;
      line-height: 1.7;
    }

    .actions {
      margin-top: 16px;
      display: flex;
      justify-content: center;
      gap: 10px;
      flex-wrap: wrap;
    }

    .btn {
      appearance: none;
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(255,255,255,0.06);
      color: rgba(234,242,255,0.9);
      padding: 10px 12px;
      border-radius: 12px;
      cursor: pointer;
      font-size: 13px;
      transition: transform 120ms ease, background 180ms ease, border-color 180ms ease;
    }

    .btn:hover {
      background: rgba(255,255,255,0.10);
      border-color: rgba(34,211,238,0.35);
      transform: translateY(-1px);
    }

    .btn.primary {
      background: linear-gradient(135deg, rgba(34,211,238,0.18), rgba(167,139,250,0.14));
      border-color: rgba(34,211,238,0.35);
    }

    /* Footer */
    .footer {
      margin-top: 18px;
      font-size: 12px;
      color: rgba(234,242,255,0.35);
      text-align: center;
      padding: 0 12px;
    }

    .footer a {
      color: rgba(234,242,255,0.35);
      text-decoration: none;
      margin: 0 6px;
      transition: color 0.25s;
    }

    .footer a:hover { color: rgba(34,211,238,0.85); }

    /* blocked çŠ¶æ€ */
    body.state-blocked .glass-card {
      background:
        linear-gradient(var(--card-strong), var(--card-strong)) padding-box,
        linear-gradient(135deg, rgba(251,113,133,0.55), rgba(167,139,250,0.25), rgba(255,255,255,0.08)) border-box;
      box-shadow: var(--shadow-danger);
    }

    body.state-blocked .radar,
    body.state-blocked .ring { display: none; }

    body.state-blocked .badge {
      opacity: 1;
      transform: scale(1);
      filter: drop-shadow(0 0 18px rgba(251,113,133,0.35));
    }

    body.state-blocked .card-title { color: rgba(251,113,133,0.95); }
    body.state-blocked .subtitle { color: rgba(234,242,255,0.65); }

    body.state-blocked .terminal { display: none; }
    body.state-blocked .progress-wrap { display: none; }
    body.state-blocked .denied-info { display: block; }

    body.state-blocked .bg::after {
      background-image: radial-gradient(circle at 50% 50%, rgba(251,113,133,0.14), transparent 60%);
      opacity: 1;
    }

    @keyframes spin { to { transform: rotate(360deg); } }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(6px); } to { opacity: 1; transform: translateY(0); } }

    /* ç§»åŠ¨ç«¯ */
    @media (max-width: 520px) {
      .glass-card { padding: 26px 18px 20px; border-radius: 16px; }
      .terminal-body { height: 150px; font-size: 12px; }
      .brand-logo { font-size: 16px; }
    }

    /* é™åŠ¨æ•ˆ */
    @media (prefers-reduced-motion: reduce) {
      * { animation: none !important; transition: none !important; scroll-behavior: auto !important; }
      .glass-card::after { display: none; }
    }
  </style>
</head>

<body>
  <div class="bg" aria-hidden="true"></div>
  <div class="noise" aria-hidden="true"></div>

  <div class="brand-header">
    <div class="brand-logo">
      <span class="brand-dot"></span>
      çŸ¥è¯†æ‹¾å…‰ç«™
    </div>
  </div>

  <div class="wrap">
    <div class="container">
      <div class="glass-card" id="securityCard" role="status" aria-live="polite">
        <div class="status-icon-wrapper" aria-hidden="true">
          <div class="radar" id="scanner"></div>
          <div class="ring"></div>
          <div class="badge" id="badge">ğŸš«</div>
        </div>

        <div class="card-title" id="statusText">æ­£åœ¨è¿›è¡Œç¯å¢ƒå®‰å…¨æ‰«æ...</div>
        <div class="subtitle" id="subText">è¯·ç¨å€™ï¼Œæ­£åœ¨éªŒè¯æŒ‡çº¹ä¸ç½‘ç»œç‰¹å¾</div>

        <div class="terminal" id="terminal">
          <div class="terminal-topbar">
            <span class="dot r"></span><span class="dot y"></span><span class="dot g"></span>
            <span class="terminal-title">K-Shield / Secure Console</span>
          </div>
          <div class="terminal-body" id="terminalBody">
            <div class="log-entry"><span class="timestamp">[SYSTEM]</span><span class="tag">BOOT</span>Initializing security protocol...</div>
          </div>
        </div>

        <div class="progress-wrap">
          <div class="progress-head">
            <span>æ‰«æè¿›åº¦</span>
            <span id="progressText">0%</span>
          </div>
          <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
          </div>
        </div>

        <div class="denied-info" id="deniedInfo">
          <div class="kv" role="group" aria-label="æ‹¦æˆªè¯¦æƒ…">
            <div class="data-row">
              <span class="data-label">è®¿é—®ç»“æœ</span>
              <span class="data-value" style="color: var(--danger)">ACCESS_DENIED</span>
            </div>
            <div class="data-row">
              <span class="data-label">å®¢æˆ·ç«¯ IP</span>
              <span class="data-value" id="userIP">Checking...</span>
            </div>
            <div class="data-row">
              <span class="data-label">é£é™©ç­‰çº§</span>
              <span class="data-value" style="color: var(--danger)">CRITICAL</span>
            </div>
            <div class="data-row">
              <span class="data-label">æ‹¦æˆªèŠ‚ç‚¹</span>
              <span class="data-value">Firewall-CN-North-03</span>
            </div>
            <div class="data-row">
              <span class="data-label">æ‹¦æˆªä»£ç </span>
              <span class="data-value">#9002_BLACKLIST</span>
            </div>
          </div>

          <p class="reason">
            ç³»ç»Ÿæ£€æµ‹åˆ°æ‚¨çš„ç½‘ç»œæŒ‡çº¹ä¸é»‘åå•æ•°æ®åº“åŒ¹é…ã€‚<br />
            ä¸ºä¿éšœâ€œçŸ¥è¯†æ‹¾å…‰ç«™â€çš„æ•°æ®å®‰å…¨ï¼Œè¿æ¥å·²è¢«å¼ºåˆ¶æ–­å¼€ã€‚
          </p>

          <div class="actions">
            <button class="btn primary" onclick="location.reload()">é‡æ–°æ£€æµ‹</button>
            <button class="btn" onclick="alert('å¦‚éœ€è§£é™¤æ‹¦æˆªï¼Œè¯·è”ç³»ç«™ç‚¹ç®¡ç†å‘˜å¹¶æä¾›æ‹¦æˆªä»£ç ã€‚')">è”ç³»ç®¡ç†å‘˜</button>
          </div>
        </div>

        <div class="footer">
          <p>&copy; 2024 Knowledge Light Station. Security provided by K-Shield.</p>
          <p><a href="#">äº¬ICPå¤‡88888888å·-1</a> â€¢ <a href="#">å…¬ç½‘å®‰å¤‡ 11010802020202å·</a></p>
        </div>
      </div>
    </div>
  </div>

  <script>
    const terminalBody = document.getElementById('terminalBody');
    const progressBar = document.getElementById('progressBar');
    const progressText = document.getElementById('progressText');
    const statusText = document.getElementById('statusText');
    const subText = document.getElementById('subText');
    const badge = document.getElementById('badge');
    const userIPDisplay = document.getElementById('userIP');
    const card = document.getElementById('securityCard');

    // è½»å¾® 3D å€¾æ–œï¼ˆæ¡Œé¢ç«¯ï¼‰
    (function enableTilt(){
      const isTouch = matchMedia('(pointer: coarse)').matches;
      if (isTouch) return;
      card.addEventListener('mousemove', (e) => {
        const r = card.getBoundingClientRect();
        const x = (e.clientX - r.left) / r.width - 0.5;
        const y = (e.clientY - r.top) / r.height - 0.5;
        const rx = (-y * 5).toFixed(2);
        const ry = (x * 7).toFixed(2);
        card.style.transform = `rotateX(${rx}deg) rotateY(${ry}deg)`;
      });
      card.addEventListener('mouseleave', () => {
        card.style.transform = 'rotateX(0deg) rotateY(0deg)';
      });
    })();

    function log(message, type = 'INFO') {
      const now = new Date();
      const timeStr = now.toTimeString().split(' ')[0];

      let color = 'rgba(34,211,238,0.95)';
      let tag = 'INFO';
      if (type === 'WARN') { color = 'rgba(251,191,36,0.95)'; tag = 'WARN'; }
      if (type === 'ERR')  { color = 'rgba(251,113,133,0.95)'; tag = 'ALERT'; }

      const div = document.createElement('div');
      div.className = 'log-entry';
      div.innerHTML = `<span class="timestamp">[${timeStr}]</span><span class="tag">${tag}</span><span style="color:${color}">${message}</span>`;
      terminalBody.appendChild(div);

      // ä¿æŒæœ€å¤š 7 è¡Œ
      while (terminalBody.childElementCount > 7) {
        terminalBody.removeChild(terminalBody.firstElementChild);
      }
    }

    async function getIP() {
      try {
        const res = await fetch('https://api.ipify.org?format=json', { cache: 'no-store' });
        const data = await res.json();
        return data.ip;
      } catch (e) {
        return '112.48.' + Math.floor(Math.random() * 255) + '.' + Math.floor(Math.random() * 255);
      }
    }

    function setProgress(p) {
      progressBar.style.width = p + '%';
      progressText.textContent = p + '%';
    }

    async function runSecurityCheck() {
      let ip = "Unknown";
      getIP().then(res => ip = res);

      const steps = [
        { t: 450,  msg: "Establishing secure handshake...", p: 12 },
        { t: 980,  msg: "Analyzing browser fingerprint...", p: 28 },
        { t: 720,  msg: "Verifying TCP/IP stack integrity...", p: 46 },
        { t: 980,  msg: "Fetching global blacklist database...", p: 64 },
        { t: 760,  msg: "Comparing signature hashes...", p: 82 },
        { t: 620,  msg: "Abnormal traffic pattern detected!", type: "WARN", p: 92 },
        { t: 620,  msg: "Triggering active defense protocol...", type: "ERR",  p: 100 },
      ];

      setProgress(0);
      for (const step of steps) {
        await new Promise(r => setTimeout(r, step.t));
        log(step.msg, step.type || 'INFO');
        setProgress(step.p);
      }

      setTimeout(() => triggerBlock(ip), 650);
    }

    function triggerBlock(ip) {
      document.body.classList.add('state-blocked');

      statusText.textContent = "è®¿é—®è¢«æ‹’ç» (Access Denied)";
      subText.textContent = "æ‹¦æˆªå·²ç”Ÿæ•ˆï¼šè¿æ¥å·²å¼ºåˆ¶æ–­å¼€";
      userIPDisplay.textContent = ip;

      badge.classList.add('on');

      let blink = false;
      setInterval(() => {
        document.title = blink ? "âš  è®¿é—®è¢«æ‹¦æˆª | çŸ¥è¯†æ‹¾å…‰ç«™" : "ğŸš« Security Alert | Knowledge Light Station";
        blink = !blink;
      }, 1000);
    }

    window.addEventListener('load', runSecurityCheck);
  </script>
</body>
</html>
